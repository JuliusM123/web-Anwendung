<div
  class="flex items-center justify-center min-h-screen relative"
  style="
    background-image: url('assets/library.svg');
    background-size: cover;
    background-position: center;
  "
>
  <div
    class="absolute inset-0 bg-gradient-to-b from-transparent to-black pointer-events-none"
  ></div>

  <div class="flex flex-col items-center relative z-10">
    <fieldset
      class="fieldset bg-base-200 border-base-300 rounded-box w-xs border p-4"
    >
      <label class="label" for="title"
        >Titel <span class="text-error">*</span></label
      >
      <input
        id="title"
        type="text"
        class="input"
        placeholder="Titel eingeben"
        required
        pattern="^\w.*"
        [(ngModel)]="titel"
        name="titel"
        #titelInput="ngModel"
      />

      @if (titelInput.invalid && titelInput.touched) {
        <div class="alert text-error text-sm font-semibold mt-2">
          @if (titelInput.hasError('required')) {
            <div>Titel ist erforderlich.</div>
          }
          @if (titelInput.hasError('pattern')) {
            <div>
              Titel muss mit einem Buchstaben, einer Ziffer oder einem
              Unterstrich beginnen.
            </div>
          }
        </div>
      }

      <label class="label" for="slug"
        >ISBN Nummer <span class="text-error">*</span></label
      >
      <input
        id="slug"
        type="text"
        class="input"
        placeholder="ISBN Nummer eingeben"
        required
        pattern="^[\d-]{13}|[\d-]{17}$"
        [(ngModel)]="isbn"
        name="isbn"
        #isbnInput="ngModel"
      />

      @if (isbnInput.invalid && isbnInput.touched) {
        <div class="alert text-error text-sm font-semibold mt-2">
          @if (isbnInput.hasError('required')) {
            <div>ISBN ist erforderlich.</div>
          }
          @if (isbnInput.hasError('pattern')) {
            <div>
              ISBN ist ungültig. Bitte geben Sie eine gültige ISBN Nummer ein
            </div>
          }
        </div>
      }

      <div class="flex items-center my-4">
        <label class="label mr-4 min-w-[80px]" for="Buchart"
          >Buchart <span class="text-error">*</span></label
        >
        <fieldset class="fieldset">
          <select class="select" [(ngModel)]="art" name="art" id="buchart">
            <option>HARDCOVER</option>
            <option>PAPERBACK</option>
            <option>EPUB</option>
          </select>
        </fieldset>
      </div>

      <label class="label" for="homepage"
        >Homepage <span class="text-error">*</span></label
      >
      <input
        id="homepage"
        type="text"
        class="input"
        placeholder="Homepage eingeben"
        required
        pattern="^\w+(\.\w+)+$"
        [(ngModel)]="homepage"
        name="homepage"
        #homepageInput="ngModel"
      />

      @if (homepageInput.invalid && homepageInput.touched) {
        <div class="alert text-error text-sm font-semibold mt-2">
          @if (homepageInput.hasError('required')) {
            <div>Homepage ist erforderlich.</div>
          }
          @if (homepageInput.hasError('pattern')) {
            <div>
              Homepage ist ungültig. Bitte geben Sie eine gültige Homepage ein
            </div>
          }
        </div>
      }

      <label class="label" for="untertitel">Untertitel</label>
      <input
        class="input"
        type="untertitel"
        required
        placeholder="Untertitel eingeben"
        [(ngModel)]="untertitel"
        name="untertitel"
      />

      <label class="label" for="price">Preis</label>
      <input
        type="number"
        class="input validator"
        required
        placeholder="Preis muss zwischen 0 und 100 liegen"
        min="0"
        max="100"
        step="0.01"
        [(ngModel)]="preis"
        title="Preis muss zwischen 0 und 100 liegen"
      />

      <label class="label" for="rabatt">Rabatt</label>
      <input
        type="number"
        class="input validator"
        required
        placeholder="Rabatt muss zwischen 0% und 100% liegen"
        min="0"
        max="100"
        step="1"
        [(ngModel)]="rabatt"
        title="Rabatt muss zwischen 0 und 100 liegen"
      />

      <label class="label" for="rabatt">Datum eingeben</label>
      <input
        type="date"
        class="input validator"
        required
        placeholder="Pick a date in 2025"
        min="2025-01-01"
        max="2025-12-31"
        [(ngModel)]="datum"
      />

      <label class="label" for="schlagwoerter">Schlagwörter</label>
      <div class="flex items-center">
        <input
          type="checkbox"
          id="javascript"
          class="checkbox"
          name="javascript"
          [(ngModel)]="isJavascriptChecked"
        />
        <label class="label mr-2" for="javascript">JAVASCRIPT</label>
        <input
          type="checkbox"
          id="typescript"
          class="checkbox"
          name="typescript"
          [(ngModel)]="isTypescriptChecked"
        />
        <label class="label" for="typescript">TYPESCRIPT</label>
      </div>

      <div class="flex items-center my-4">
        <label class="label mr-4 min-w-[80px]" for="rating">Rating</label>
        <div class="flex justify-center flex-1">
          <div class="rating rating-lg" id="rating">
            <input
              type="radio"
              name="rating-10"
              class="rating-hidden"
              aria-label="clear"
            />
            <input
              type="radio"
              name="rating-10"
              class="mask mask-star-2"
              aria-label="1 star"
              [(ngModel)]="rating"
              [value]="1"
            />
            <input
              type="radio"
              name="rating-10"
              class="mask mask-star-2"
              aria-label="2 star"
              checked="checked"
              [(ngModel)]="rating"
              [value]="2"
            />
            <input
              type="radio"
              name="rating-10"
              class="mask mask-star-2"
              aria-label="3 star"
              [(ngModel)]="rating"
              [value]="3"
            />
            <input
              type="radio"
              name="rating-10"
              class="mask mask-star-2"
              aria-label="4 star"
              [(ngModel)]="rating"
              [value]="4"
            />
            <input
              type="radio"
              name="rating-10"
              class="mask mask-star-2"
              aria-label="5 star"
              [(ngModel)]="rating"
              [value]="5"
            />
          </div>
        </div>
      </div>

      <div class="flex items-center my-4">
        <label class="label mr-4" for="lieferbarRadioGroup">Lieferbar</label>
        <div class="flex justify-center flex-1" id="lieferbarRadioGroup">
          <label class="mr-4 cursor-pointer label">
            <span class="label-text mr-1">Ja</span>
            <input
              type="radio"
              name="lieferbarRadio"
              [value]="true"
              class="radio"
              [(ngModel)]="lieferbar"
            />
          </label>
          <label class="cursor-pointer label">
            <span class="label-text mr-1">Nein</span>
            <input
              type="radio"
              name="lieferbarRadio"
              [value]="false"
              class="radio"
              [(ngModel)]="lieferbar"
            />
          </label>
        </div>
      </div>

      <div class="mt-4 flex justify-center">
        <button
          class="btn btn-primary"
          (click)="buchSenden()"
          [disabled]="titelInput.invalid"
        >
          Anlegen
        </button>
      </div>
    </fieldset>

    @if (error) {
      <div role="alert" class="alert alert-error w-xs mt-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 shrink-0 stroke-current"
          fill="none"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span>{{ error.status }}: {{ error.statusText }}</span>
      </div>
    } @else if (responseStatus) {
      <div role="alert" class="alert alert-success w-xs mt-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 shrink-0 stroke-current"
          fill="none"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span>{{ responseStatus }}: Buch erfolgreich angelegt.</span>
      </div>
    }
  </div>
</div>
